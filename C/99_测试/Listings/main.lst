C51 COMPILER V9.60.0.0   MAIN                                                              06/08/2022 22:21:58 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: S:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          /*
   2          02_蜂鸣器和独立按键
   3              功能
   4                  按下任意一个独立按键蜂鸣器发出哆来咪发唆拉稀，再按下停止，不发声
             -led灯亮
   5              目的
   6                  1 练习独立按键和蜂鸣器
   7                  2 测试一下延时函数的延时时间参数
   8          
   9          */
  10          
  11          #include "reg52.h"
  12          
  13          ////////////////////////////////////////////////////////////////////////////////
  14          typedef unsigned long int u32;
  15          typedef unsigned int u16;
  16          typedef unsigned char u8;
  17          
  18          sbit beep = P2 ^ 0;
  19          sbit text1 = P0 ^ 0;
  20          sbit text2 = P0 ^ 1;
  21          
  22          u8 test;
  23          
  24          /*******************************************************************************
  25           * 函 数 名      : Timer1Init
  26           * 函数功能      : 定时器初始化函数
  27           * 输    入      :
  28           * 输    出      :
  29           *******************************************************************************/
  30          void Timer1Init(void)
  31          {
  32   1          TMOD |= 0X10; // 设置工作方式为1，16位定时器,定时器读取内部时钟，计时器读取
             -管脚脉冲
  33   1          TL1 = 0X18;   // 定时器1低八位赋初值，10ms
  34   1          TH1 = 0XFC;   // 定时器1高八位赋初值
  35   1          ET1 = 1;      // 定时器1中断打开
  36   1          EA = 1;       // 总中断打开
  37   1          TR1 = 1;      // 控制定时器，1为打开
  38   1      }
  39          
  40          /*******************************************************************************
  41          * 函 数 名       : main
  42          * 函数功能     : 主函数
  43          * 输    入       : 
  44          * 输    出       : 
  45          *******************************************************************************/
  46          void main(void)
  47          {
  48   1      //    test = 0;
  49   1          P0 =0;
  50   1      //    Timer1Init();
  51   1          while (1)
  52   1          {
C51 COMPILER V9.60.0.0   MAIN                                                              06/08/2022 22:21:58 PAGE 2   

  53   2              if (text1)
  54   2              {
  55   3                  P1 = 1;
  56   3              }
  57   2              if (text2)
  58   2              {
  59   3                  P1 = 1;
  60   3              }
  61   2              if (text1 == 0 && text2 == 0)
  62   2              {
  63   3                  P1 = 0;
  64   3              }
  65   2          }
  66   1      }
  67          
  68          /*******************************************************************************
  69           * 函 数 名      : Timer1
  70           * 函数功能      : 计数器1中断函数
  71           * 输    入      :
  72           * 输    出      :
  73           *******************************************************************************/
  74          void Timer1(void) interrupt 3
  75          {
  76   1          TL1 = 0X18;   // 定时器1低八位赋初值，10ms
  77   1          TH1 = 0XFC;   // 定时器1高八位赋初值
  78   1          if (test)
  79   1          {
  80   2              test = 0;
  81   2              beep = ~beep;
  82   2              P0 =0;
  83   2          }
  84   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     65    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
